<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>Maddison Project database in R</title>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    
    <!-- change the folder below to switch themes -->
    <link rel="stylesheet" href="http://muuankarski.github.io/css/yeti/bootstrap.css" media="screen">
    <link rel="stylesheet" href="http://muuankarski.github.io/css/assets/css/bootswatch.min.css"> 


<!-- to quickly try out themes, activate this and tweak the url!
    <link rel="stylesheet" href="./bootstrap.css" media="screen">
-->

        <!-- syntax highlighting CSS -->
        <link rel="stylesheet" href="http://muuankarski.github.io/css/syntax.css">

        <!-- Custom CSS -->
        <link rel="stylesheet" href="http://muuankarski.github.io/css/footer.css">

        <!-- Font avesome -->
        <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">


  </head>
  <body>
    <script src="http://bootswatch.com/assets/js/bsa.js"></script>

    <div class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <a href="http://muuankarski.github.io/" class="navbar-brand">Markus Kainu</a>
          <button class="navbar-toggle" type="button" data-toggle="collapse" data-target="#navbar-main">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
        </div>
         <div class="navbar-collapse collapse" id="navbar-main">
          <ul class="nav navbar-nav">
          <li><a href="http://muuankarski.github.io/blog.html" title="blog">blog</a></li>
          <li><a href="http://muuankarski.github.io/about.html" title="about">about</a></li>
          <li><a href="http://muuankarski.github.io/resources.html" title="resources">resources</a></li>
         </ul>
<!--        <div class="navbar-collapse collapse" id="navbar-main">
          <ul class="nav navbar-nav">
                <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="themes">R<span class="caret"></span></a>
              <ul class="dropdown-menu" aria-labelledby="R">
                <li><a href="http://muuankarski.github.io/R/lue.html">Datan lukeminen & kirjoittaminen</a></li>
                <li><a href="http://muuankarski.github.io/R/manipulointi.html">Manipuloiminen</a></li>
                <li><a href="http://muuankarski.github.io/R/funktiot.html">Funktiot</a></li>
                <li><a href="http://muuankarski.github.io/R/grafiikka.html">Grafiikka</a></li>
                <li><a href="http://muuankarski.github.io/R/survey.html">Survey</a></li>
              </ul>         
         </ul>
          <ul class="nav navbar-nav">
                <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="themes">Toistettava tutkimus<span class="caret"></span></a>
              <ul class="dropdown-menu" aria-labelledby="toistettava">
                <li><a href="http://muuankarski.github.io/toistettava/knitr.html">knitr</a></li>
                <li><a href="http://muuankarski.github.io/toistettava/kirjoita.html">Kirjoittaminen</a></li>
              </ul>         
         </ul>
         <ul class="nav navbar-nav">
                <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="themes">Versiohallinta<span class="caret"></span></a>
              <ul class="dropdown-menu" aria-labelledby="versio">
                <li><a href="http://muuankarski.github.io/versio/git.html">git</a></li>
              </ul>         
         </ul>
         <ul class="nav navbar-nav">
                <li class="dropdown">
              <a class="dropdown-toggle" data-toggle="dropdown" href="#" id="themes">Julkaiseminen<span class="caret"></span></a>
              <ul class="dropdown-menu" aria-labelledby="julkaisu">
                <li><a href="http://muuankarski.github.io/julkaisu/latex.html">latex</a></li>
                <li><a href="http://muuankarski.github.io/julkaisu/jekyll.html">jekyll</a></li>
                <li><a href="http://muuankarski.github.io/julkaisu/pandoc.html">Pandoc</a></li>
              </ul>         
         </ul>
-->


         <ul class="nav navbar-nav navbar-right">
            <li><a title="blog RSS" href="http://muuankarski.github.io/feed.xml"><i class="fa fa-rss fa-2x"></i></a></li>li>
            <li><a title="code" href="http://github.com/muuankarski"> <i class="fa fa-github fa-2x"></i></a></li>
            <li><a title="tweets" href="https://twitter.com/muuankarski"> <i class="fa fa-twitter fa-2x"></i></a></li>
            <li><a href="mailto:markuskainu@gmail.com?Subject=Email me!" title="Comment from the website!" target="_top"><i class="fa fa-envelope fa-2x"></i></a></li>                        
            </li>

                        
          </ul>
        </div>
      </div>
    </div>


    <div class="container">

          <h2>Maddison Project database in R</h2>
<p class="meta">17 Sep 2013</p>

<div class="post">
<h2>Economic data in R</h2>

<p>There is a growing trend of new methods for assessing economic data in R. Packages as <a href="https://github.com/vincentarelbundock/WDI">WDI: World Development indicators</a>, <a href="http://www.quandl.com/help/packages/r">Quandl</a>, <a href="http://cran.r-project.org/web/packages/pwt/index.html">pwt: Penn World Table</a>. Also the <strong>data sets</strong> -section in  <a href="http://cran.r-project.org/web/views/Econometrics.html">CRAN Task View: Computational Econometrics</a> is worth looking.</p>

<h2>Maddison Project database</h2>

<p>One which is seemingly missing is the mighty <a href="http://www.ggdc.net/maddison/maddison-project/home.htm">Maddison Project database</a> that is often used especially by economic historians. Data includes estimates of economic growth in the world economic between <strong>AD 1 and 2010</strong>. A major update was done in January 2013 and a detailed documentation of that update can be read from <a href="http://www.ggdc.net/maddison/maddison-project/publications/wp4.pdf">Bolt and Van Zanden (2013). The First Update of the Maddison Project; Re-Estimating Growth Before 1820, Maddison Project Working Paper 4.</a>. The actual data as .xlsx-file is here: <a href="http://www.ggdc.net/maddison/maddison-project/data/mpd_2013-01.xlsx">mpd_2013-01.xlsx</a></p>

<h2>The Exercise</h2>

<p>Below is a stepwise explanation on how to visualize the data.</p>

<h3>Load the data</h3>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span>gdata<span class="p">)</span>
url <span class="o">&lt;-</span> <span class="s">&quot;http://www.ggdc.net/maddison/maddison-project/data/mpd_2013-01.xlsx&quot;</span>
dat <span class="o">&lt;-</span> read.xls<span class="p">(</span><span class="kp">url</span><span class="p">,</span> header<span class="o">=</span><span class="kc">TRUE</span><span class="p">,</span> skip<span class="o">=</span><span class="m">1</span><span class="p">,</span> stringsAsFactors <span class="o">=</span> <span class="kc">FALSE</span><span class="p">)</span>
</code></pre></div>
<h3>Manipulating the data</h3>

<p>Excel-sheets usually require some processing in R. Below I&#39;m removing row not needed and melting the data in long format, and convert in to numerical.</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">column.names <span class="o">&lt;-</span> <span class="kp">as.character</span><span class="p">(</span>dat<span class="p">[</span><span class="m">1</span><span class="p">,])</span>
column.names<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="o">&lt;-</span> <span class="s">&quot;year&quot;</span>
df.mad <span class="o">&lt;-</span> dat<span class="p">[</span><span class="m">-1</span><span class="p">,]</span>
<span class="kp">names</span><span class="p">(</span>df.mad<span class="p">)</span> <span class="o">&lt;-</span> column.names
<span class="kn">library</span><span class="p">(</span>reshape2<span class="p">)</span>
df.mad.l <span class="o">&lt;-</span> melt<span class="p">(</span>df.mad<span class="p">,</span> id.vars<span class="o">=</span><span class="s">&quot;year&quot;</span><span class="p">)</span>
df.mad.l<span class="o">$</span>value <span class="o">&lt;-</span> <span class="kp">as.numeric</span><span class="p">(</span>df.mad.l<span class="o">$</span>value<span class="p">)</span>
df.mad.l <span class="o">&lt;-</span> df.mad.l<span class="p">[</span><span class="o">!</span><span class="kp">is.na</span><span class="p">(</span>df.mad.l<span class="o">$</span>value<span class="p">),</span> <span class="p">]</span>
</code></pre></div>
<h3>Subset the data</h3>

<p>My research emphasises in post-socialist space and therefore I will subset the data. In addition to post-socialist countries I&#39;m including some Western countries, too.</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">cntry.list <span class="o">&lt;-</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Czech Republic&quot;</span><span class="p">,</span><span class="s">&quot;Estonia&quot;</span><span class="p">,</span><span class="s">&quot;Hungary&quot;</span><span class="p">,</span>
               <span class="s">&quot;Bulgaria&quot;</span><span class="p">,</span><span class="s">&quot;Latvia&quot;</span><span class="p">,</span><span class="s">&quot;Lithuania&quot;</span><span class="p">,</span><span class="s">&quot;Poland&quot;</span><span class="p">,</span>
               <span class="s">&quot;Slovakia&quot;</span><span class="p">,</span><span class="s">&quot;Slovenia&quot;</span><span class="p">,</span><span class="s">&quot;Romania&quot;</span><span class="p">,</span><span class="s">&quot;Albania&quot;</span><span class="p">,</span>
               <span class="s">&quot;Bosnia&quot;</span><span class="p">,</span><span class="s">&quot;Bulgaria&quot;</span><span class="p">,</span><span class="s">&quot;Croatia&quot;</span><span class="p">,</span><span class="s">&quot;Macedonia&quot;</span><span class="p">,</span>
               <span class="s">&quot;Montenegro&quot;</span><span class="p">,</span><span class="s">&quot;Kosovo&quot;</span><span class="p">,</span><span class="s">&quot;Serbia&quot;</span><span class="p">,</span><span class="s">&quot;Armenia&quot;</span><span class="p">,</span>
               <span class="s">&quot;Azerbaijan&quot;</span><span class="p">,</span><span class="s">&quot;Belarus&quot;</span><span class="p">,</span><span class="s">&quot;Georgia&quot;</span><span class="p">,</span><span class="s">&quot;Kazakhstan&quot;</span><span class="p">,</span>
               <span class="s">&quot;Kyrgyzstan&quot;</span><span class="p">,</span><span class="s">&quot;Moldova&quot;</span><span class="p">,</span><span class="s">&quot;Mongolia&quot;</span><span class="p">,</span><span class="s">&quot;Russia&quot;</span><span class="p">,</span>
               <span class="s">&quot;Tajikistan&quot;</span><span class="p">,</span><span class="s">&quot;Ukraine&quot;</span><span class="p">,</span><span class="s">&quot;Uzbekistan&quot;</span><span class="p">,</span>
               <span class="s">&quot;F. USSR&quot;</span><span class="p">,</span><span class="s">&quot;USA&quot;</span><span class="p">,</span><span class="s">&quot;Japan&quot;</span><span class="p">,</span><span class="s">&quot;Finland&quot;</span><span class="p">,</span><span class="s">&quot;Sweden&quot;</span><span class="p">)</span>
<span class="kn">library</span><span class="p">(</span>stringr<span class="p">)</span>
df.mad.l<span class="o">$</span>variable <span class="o">&lt;-</span>str_trim<span class="p">(</span>df.mad.l<span class="o">$</span>variable<span class="p">,</span> side <span class="o">=</span> <span class="s">&quot;both&quot;</span><span class="p">)</span>
df.mad.l2 <span class="o">&lt;-</span> df.mad.l<span class="p">[</span>df.mad.l<span class="o">$</span>variable <span class="o">%in%</span> cntry.list<span class="p">,</span> <span class="p">]</span>
</code></pre></div>
<p>Then I will group the countries in one sensible way.</p>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span>car<span class="p">)</span>
df.mad.l2<span class="o">$</span>group<span class="p">[</span>df.mad.l2<span class="o">$</span>variable <span class="o">%in%</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Czech Republic&quot;</span><span class="p">,</span><span class="s">&quot;Estonia&quot;</span><span class="p">,</span><span class="s">&quot;Hungary&quot;</span><span class="p">,</span>
                                          <span class="s">&quot;Bulgaria&quot;</span><span class="p">,</span><span class="s">&quot;Latvia&quot;</span><span class="p">,</span><span class="s">&quot;Lithuania&quot;</span><span class="p">,</span><span class="s">&quot;Poland&quot;</span><span class="p">,</span>
                                          <span class="s">&quot;Slovakia&quot;</span><span class="p">,</span><span class="s">&quot;Slovenia&quot;</span><span class="p">,</span><span class="s">&quot;Romania&quot;</span><span class="p">,</span><span class="s">&quot;Bulgaria&quot;</span><span class="p">)]</span> <span class="o">&lt;-</span> <span class="s">&quot;CEE&quot;</span>
df.mad.l2<span class="o">$</span>group<span class="p">[</span>df.mad.l2<span class="o">$</span>variable <span class="o">%in%</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Albania&quot;</span><span class="p">,</span><span class="s">&quot;Bosnia&quot;</span><span class="p">,</span><span class="s">&quot;Croatia&quot;</span><span class="p">,</span><span class="s">&quot;Macedonia&quot;</span><span class="p">,</span>
                                          <span class="s">&quot;Montenegro&quot;</span><span class="p">,</span><span class="s">&quot;Kosovo&quot;</span><span class="p">,</span><span class="s">&quot;Serbia&quot;</span><span class="p">)]</span> <span class="o">&lt;-</span> <span class="s">&quot;Balkan&quot;</span>
df.mad.l2<span class="o">$</span>group<span class="p">[</span>df.mad.l2<span class="o">$</span>variable <span class="o">%in%</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;Armenia&quot;</span><span class="p">,</span><span class="s">&quot;Azerbaijan&quot;</span><span class="p">,</span><span class="s">&quot;Belarus&quot;</span><span class="p">,</span><span class="s">&quot;Georgia&quot;</span><span class="p">,</span><span class="s">&quot;Kazakhstan&quot;</span><span class="p">,</span>
                                          <span class="s">&quot;Kyrgyzstan&quot;</span><span class="p">,</span><span class="s">&quot;Moldova&quot;</span><span class="p">,</span><span class="s">&quot;Mongolia&quot;</span><span class="p">,</span><span class="s">&quot;Russia&quot;</span><span class="p">,</span>
                                          <span class="s">&quot;Tajikistan&quot;</span><span class="p">,</span><span class="s">&quot;Ukraine&quot;</span><span class="p">,</span><span class="s">&quot;Uzbekistan&quot;</span><span class="p">)]</span> <span class="o">&lt;-</span> <span class="s">&quot;CIS&quot;</span>
df.mad.l2<span class="o">$</span>group<span class="p">[</span>df.mad.l2<span class="o">$</span>variable <span class="o">%in%</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;USA&quot;</span><span class="p">,</span><span class="s">&quot;Japan&quot;</span><span class="p">,</span><span class="s">&quot;Finland&quot;</span><span class="p">,</span><span class="s">&quot;Sweden&quot;</span><span class="p">)]</span> <span class="o">&lt;-</span> <span class="s">&quot;WEST&quot;</span>
df.mad.l2<span class="o">$</span>group<span class="p">[</span>df.mad.l2<span class="o">$</span>variable <span class="o">%in%</span> <span class="kt">c</span><span class="p">(</span><span class="s">&quot;F. USSR&quot;</span><span class="p">)]</span> <span class="o">&lt;-</span> <span class="s">&quot;USSR&quot;</span>
</code></pre></div>
<h3>Plotting the data from 1850 to 2010</h3>

<p>As I mentioned in the beginning the data extends for over 2000 years. My interest is more of contemporary nature, so I will subset data to cover only the last 160 years from 1850 to 2010. Also, I will add some major historical events during that period that have had an effect on economic growth, too.</p>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
ggplot<span class="p">(</span>data<span class="o">=</span>df.mad.l2<span class="p">[</span>df.mad.l2<span class="o">$</span>year <span class="o">&gt;</span> <span class="m">1850</span><span class="p">,</span> <span class="p">],</span> 
       aes<span class="p">(</span>x<span class="o">=</span>year<span class="p">,</span>y<span class="o">=</span>value<span class="p">,</span>group<span class="o">=</span>variable<span class="p">,</span>color<span class="o">=</span>group<span class="p">))</span> <span class="o">+</span> 
  geom_line<span class="p">()</span> <span class="o">+</span> geom_point<span class="p">()</span> <span class="o">+</span> 
  geom_text<span class="p">(</span>data<span class="o">=</span>df.mad.l2<span class="p">[</span>df.mad.l2<span class="o">$</span>year<span class="o">==</span><span class="m">2010</span><span class="p">,],</span> 
            aes<span class="p">(</span>x<span class="o">=</span>year<span class="p">,</span>y<span class="o">=</span>value<span class="p">,</span>label<span class="o">=</span>variable<span class="p">))</span> <span class="o">+</span>
  annotate<span class="p">(</span><span class="s">&quot;rect&quot;</span><span class="p">,</span> xmin <span class="o">=</span> <span class="m">1914</span><span class="p">,</span> xmax <span class="o">=</span> <span class="m">1918</span><span class="p">,</span> ymin <span class="o">=</span> <span class="m">5</span><span class="p">,</span> ymax <span class="o">=</span> <span class="m">20000</span><span class="p">,</span>
  alpha <span class="o">=</span> <span class="m">.2</span><span class="p">)</span> <span class="o">+</span>
  annotate<span class="p">(</span><span class="s">&quot;text&quot;</span><span class="p">,</span> x <span class="o">=</span> <span class="m">1916</span><span class="p">,</span> y <span class="o">=</span> <span class="m">21000</span><span class="p">,</span> label <span class="o">=</span> <span class="s">&quot;WW1&quot;</span><span class="p">)</span> <span class="o">+</span>
  annotate<span class="p">(</span><span class="s">&quot;rect&quot;</span><span class="p">,</span> xmin <span class="o">=</span> <span class="m">1939</span><span class="p">,</span> xmax <span class="o">=</span> <span class="m">1945</span><span class="p">,</span> ymin <span class="o">=</span> <span class="m">5</span><span class="p">,</span> ymax <span class="o">=</span> <span class="m">20000</span><span class="p">,</span>
  alpha <span class="o">=</span> <span class="m">.2</span><span class="p">)</span> <span class="o">+</span>
  annotate<span class="p">(</span><span class="s">&quot;text&quot;</span><span class="p">,</span> x <span class="o">=</span> <span class="m">1942</span><span class="p">,</span> y <span class="o">=</span> <span class="m">21000</span><span class="p">,</span> label <span class="o">=</span> <span class="s">&quot;WW2&quot;</span><span class="p">)</span>  <span class="o">+</span>
  annotate<span class="p">(</span><span class="s">&quot;segment&quot;</span><span class="p">,</span> x <span class="o">=</span> <span class="m">1991</span><span class="p">,</span> xend <span class="o">=</span> <span class="m">1991</span><span class="p">,</span> y <span class="o">=</span> <span class="m">0</span><span class="p">,</span> yend <span class="o">=</span> <span class="m">30000</span><span class="p">,</span>
  colour <span class="o">=</span> <span class="s">&quot;blue&quot;</span><span class="p">)</span> <span class="o">+</span>
  annotate<span class="p">(</span><span class="s">&quot;text&quot;</span><span class="p">,</span> x <span class="o">=</span> <span class="m">1991</span><span class="p">,</span> y <span class="o">=</span> <span class="m">31000</span><span class="p">,</span> label <span class="o">=</span> <span class="s">&quot;Dissolution of \n the Soviet Union&quot;</span><span class="p">)</span> <span class="o">+</span>
  theme_minimal<span class="p">()</span> <span class="o">+</span>
  theme<span class="p">(</span>legend.position<span class="o">=</span><span class="s">&quot;top&quot;</span><span class="p">)</span>
</code></pre></div>
<p><img src="/figure/source/2013-09-17-economic-history-dataset-in-r/maddison5.png" alt="plot of chunk maddison5"> </p>

</div>


      <footer>

        <div class="row">
          <div class="col-lg-12">

            <ul class="list-unstyled">
              <li class="pull-right"><a href="#top">Back to top</a></li>     
            </ul>

<!--
<a rel="license" href="http://creativecommons.org/licenses/by/4.0/"><img alt="Creative Commons -käyttölupa" style="border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br />Tämä teos on lisensoitu <a rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Nimeä 4.0 Kansainvälinen -käyttöluvalla</a>.

-->

            

            <p>Theme by <a href="http://thomaspark.me" rel="nofollow">Thomas Park</a>
            <p>Code released under the <a href="https://github.com/thomaspark/bootswatch/blob/gh-pages/LICENSE">MIT License</a>.</p>
            <p>Based on <a href="http://getbootstrap.com" rel="nofollow">Bootstrap</a>. Icons from <a href="http://fortawesome.github.io/Font-Awesome/" rel="nofollow">Font Awesome</a>. Web fonts from <a href="http://www.google.com/webfonts" rel="nofollow">Google</a>.</p>

        </div>

<!--
<blockquote class="pull-left">
  <p>Give a man a fish and you feed him for a day; teach a man to fish and you feed him for a lifetime</p>
  <small>Anne Isabella Thackeray Ritchie <cite title="Source Title">Mrs. Dymond (1885)</cite></small>
</blockquote>
-->
      </footer>


    </div>


    <script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
    <script src="http://bootswatch.com/bower_components/bootstrap/dist/js/bootstrap.min.js"></script>
    <script src="http://bootswatch.com/assets/js/bootswatch.js"></script>
  </body>
</html>


